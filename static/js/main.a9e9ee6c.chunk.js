(this["webpackJsonpvisualize-blockchain"]=this["webpackJsonpvisualize-blockchain"]||[]).push([[0],{139:function(e,t,a){e.exports=a.p+"static/media/logoXL.5ebf598e.png"},152:function(e,t,a){e.exports=a(245)},157:function(e,t,a){},163:function(e,t){},165:function(e,t){},198:function(e,t){},199:function(e,t){},245:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(12),o=a.n(r),i=(a(157),a(14)),s=a(19),c=a(25),d=a(32),u=a(294),m=a(297),h=a(299),g=a(247),f=a(301),y=a(300),b=a(302),p=" #336699",v="#CADCED",E=" #009999",k="#FFFFF0",w="#808080",O="#CC3333",T="#62b362",x="#FE8402",C="#F6FAF9",j=a(139),B=a.n(j),A=a(48),S=a(49),H=a(29),P=a(158),I=new(0,a(56).ec)("secp256k1"),F=function(){function e(t,a,n){Object(A.a)(this,e),this.fromAddress=t,this.toAddress=a,this.amount=n,this.timestamp=Date.now()}return Object(S.a)(e,[{key:"calculateHash",value:function(){return P(this.fromAddress+this.toAddress+this.amount).toString()}},{key:"signTransaction",value:function(e){if(e.getPublic("hex")!==this.fromAddress)throw new Error("You cannot sign transactions for other wallets");var t=this.calculateHash(),a=e.sign(t,"base64");this.signature=a.toDER("hex")}},{key:"isValid",value:function(){if(null===this.fromAddress)return!0;if(!this.signature||0===this.signature.length)throw new Error("No signature in this transaction");return I.keyFromPublic(this.fromAddress,"hex").verify(this.calculateHash(),this.signature)}}]),e}(),W=function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(A.a)(this,e),console.log("Inside the constructor of Block"),this.timestamp=t,this.transactions=a,this.previousHash=n,this.hash=this.calculateHash(),this.nonce=0}return Object(S.a)(e,[{key:"calculateHash",value:function(){return P(this.nonce+this.timestamp+this.previousHash+JSON.stringify(this.transactions)).toString()}},{key:"mineBlock",value:function(e){for(;this.hash.substring(0,e)!==Array(e+1).join("0");)this.nonce++,this.hash=this.calculateHash();console.log("Block mined:"+this.hash)}},{key:"hasValidTransactions",value:function(){var e,t=Object(H.a)(this.transactions);try{for(t.s();!(e=t.n()).done;){if(!e.value.isValid())return!1}}catch(a){t.e(a)}finally{t.f()}return!0}}]),e}(),z=function(){function e(){Object(A.a)(this,e),this.chain=[this.createGenesisBlock()],this.difficulty=2,this.pendingTransactions=[],this.miningReward=100}return Object(S.a)(e,[{key:"createGenesisBlock",value:function(){return new W(Date.now(),"Genesis Block","0")}},{key:"getLatestBlock",value:function(){return this.chain[this.chain.length-1]}},{key:"minePendingTransactions",value:function(e){console.log("Mining pending transaction",e);var t=new F(null,e,this.miningReward);this.pendingTransactions.push(t);var a=new W(Date.now(),this.pendingTransactions,this.getLatestBlock().hash);a.mineBlock(this.difficulty),console.log("Block successfully mined!"),this.chain.push(a),this.pendingTransactions=[]}},{key:"addTransaction",value:function(e){if(console.log("Adding new transaction"),!e.fromAddress||!e.toAddress)throw new Error("Transaction must include from and to address");if(!e.isValid())throw new Error("Cannot add invalid transaction to chain");this.pendingTransactions.push(e)}},{key:"getBalanceOfAddress",value:function(e){var t=0;console.log("Chain",this.chain);var a,n=Object(H.a)(this.chain);try{for(n.s();!(a=n.n()).done;){var l,r=a.value,o=Object(H.a)(r.transactions);try{for(o.s();!(l=o.n()).done;){var i=l.value;i.fromAddress===e&&(t-=i.amount),i.toAddress===e&&(t+=i.amount)}}catch(s){o.e(s)}finally{o.f()}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"getAllTransactionsForWallet",value:function(e){var t,a=[],n=Object(H.a)(this.chain);try{for(n.s();!(t=n.n()).done;){var l,r=t.value,o=Object(H.a)(r.transactions);try{for(o.s();!(l=o.n()).done;){var i=l.value;i.fromAddress!==e&&i.toAddress!==e||a.push(i)}}catch(s){o.e(s)}finally{o.f()}}}catch(s){n.e(s)}finally{n.f()}return a}},{key:"isChainValid",value:function(){for(var e=1;e<this.chain.length;e++){var t=this.chain[e],a=this.chain[e-1];if(!t.hasValidTransactions())return!1;if(t.hash!==t.calculateHash())return!1;if(t.previousHash!==a.hash)return!1}return!0}}]),e}(),N=a(56).ec,D=function(){function e(){Object(A.a)(this,e),this.blockchainInstance=new z,this.walletKeys=[],console.log("Inside constructor of blockchainService"),this.blockchainInstance.difficulty=1,this.blockchainInstance.minePendingTransactions("my-wallet-address"),this.generateWalletKeys()}return Object(S.a)(e,[{key:"generateWalletKeys",value:function(){console.log("Generating wallet keys");var e=new N("secp256k1").genKeyPair();this.walletKeys.push({keyObj:e,publicKey:e.getPublic("hex"),privateKey:e.getPrivate("hex")})}},{key:"getBlocks",value:function(){return this.blockchainInstance.chain}},{key:"addTransaction",value:function(e){console.log("Adding Transaction",e),this.blockchainInstance.addTransaction(e)}},{key:"getPendingTransactions",value:function(){return console.log("Getting Pending Transaction"),this.blockchainInstance.pendingTransactions}},{key:"minePendingTransactions",value:function(){this.blockchainInstance.minePendingTransactions(this.walletKeys[0].publicKey)}},{key:"getBalanceOfAddress",value:function(e){return this.blockchainInstance.getBalanceOfAddress(e)}}]),e}(),L=l.a.createContext("No blocks"),K=new D,G=K.getBlocks(),V=K.getPendingTransactions(),R=function(e){var t=e.children,a=Object(n.useState)(G),r=Object(c.a)(a,2),o=r[0],i=r[1],s=Object(n.useState)(V),d=Object(c.a)(s,2),u=d[0],m=d[1];return l.a.createElement(L.Provider,{value:{blocks:o,getNewBlocks:function(e){i(e)},pendingTxns:u,getPendingTxns:function(e){m(e)}}},t)},Y=Object(u.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2),color:p},title:{flexGrow:1},header:{backgroundColor:C},link:{textDecoration:"none",color:p}}})),M=function(){var e=Y(),t=Object(n.useContext)(L).pendingTxns.length;return l.a.createElement("div",{className:e.root},l.a.createElement(m.a,{position:"static",className:e.header},l.a.createElement(h.a,null,l.a.createElement(y.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},l.a.createElement("img",{src:B.a,alt:"logo",style:{height:50,width:50}})),l.a.createElement(g.a,{variant:"h6",className:e.title},l.a.createElement(d.c,{exact:!0,to:"/",className:e.link,activeStyle:{color:E}},"Blockchain-Visualization")),l.a.createElement(d.c,{to:"/settings",className:e.link,activeStyle:{color:E}},l.a.createElement(f.a,{size:"small",variant:"outlined",color:"inherit"},"Settings")),l.a.createElement(d.c,{to:"/createtxns",className:e.link,activeStyle:{color:E}},l.a.createElement(b.a,{anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:t,color:"secondary"},l.a.createElement(f.a,{size:"small",variant:"outlined",color:"inherit",style:{marginLeft:5}},"Create Transactions"))))))},J=a(246),X=a(307),$=a(311),q=a(310),Q=a(306),U=a(308),Z=a(309),_=a(320),ee=a(305),te=a(304),ae=a(303),ne=function(e){var t=e.open,a=e.handleClose,n=e.walletInfo;return console.log("Wallet Info",n),l.a.createElement(_.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(ae.a,{id:"alert-dialog-title",style:{color:E}},"Your Wallet Details"),l.a.createElement(te.a,null,l.a.createElement("div",null,l.a.createElement("p",{style:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},"Your Wallet Address:",l.a.createElement("span",{style:{color:x,marginLeft:5}},n.address)),l.a.createElement("p",null,"Balance: ",l.a.createElement("span",{style:{color:x,marginLeft:5}},n.balance))),n.transactions.length>0?l.a.createElement(re,{txndata:n.transactions}):l.a.createElement("p",{style:{color:O}},"No transaction details")),l.a.createElement(ee.a,null,l.a.createElement(f.a,{onClick:a,style:{color:O,fontSize:18,fontWeight:"bold"},autoFocus:!0},"Close")))},le={tableContainer:{marginBottom:40},tableHead:{backgroundColor:p},addressBody:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},addressCell:{maxWidth:"100px",cursor:"pointer",color:x},plainCell:{maxWidth:"100px"}},re=function(e){var t=e.txndata,a=e.linked,r=Object(n.useContext)(L).blocks,o=Object(n.useState)(!1),i=Object(c.a)(o,2),d=i[0],u=i[1],m=Object(n.useState)({address:"",balance:"",transactions:[]}),h=Object(c.a)(m,2),g=h[0],f=h[1],y=function(e){console.log(e.target.textContent);var t=b(e.target.textContent),a=p(e.target.textContent);console.log("My balance is",a),f(Object(s.a)(Object(s.a)({},g),{},{address:e.target.textContent,balance:t,transactions:a})),u(!0)},b=function(e){var t,a=0,n=Object(H.a)(r);try{for(n.s();!(t=n.n()).done;){var l,o=t.value,i=Object(H.a)(o.transactions);try{for(i.s();!(l=i.n()).done;){var s=l.value;s.fromAddress===e&&(a-=s.amount),s.toAddress===e&&(a+=s.amount)}}catch(c){i.e(c)}finally{i.f()}}}catch(c){n.e(c)}finally{n.f()}return a},p=function(e){var t,a=[],n=Object(H.a)(r);try{for(n.s();!(t=n.n()).done;){var l,o=t.value,i=Object(H.a)(o.transactions);try{for(i.s();!(l=i.n()).done;){var s=l.value;s.fromAddress!==e&&s.toAddress!==e||a.push(s)}}catch(c){i.e(c)}finally{i.f()}}}catch(c){n.e(c)}finally{n.f()}return a};return l.a.createElement(n.Fragment,null,l.a.createElement(Q.a,{component:J.a,style:le.tableContainer},l.a.createElement(X.a,{"aria-label":"customized table"},l.a.createElement(U.a,{style:le.tableHead},l.a.createElement(Z.a,{style:{color:"white"}},l.a.createElement(q.a,{style:{color:k}},"#"),l.a.createElement(q.a,{style:{color:k},align:"center"},"From"),l.a.createElement(q.a,{style:{color:k},align:"center"},"To"),l.a.createElement(q.a,{style:{color:k},align:"center"},"Amount"),l.a.createElement(q.a,{style:{color:k},align:"center"},"Timestamp"),l.a.createElement(q.a,{style:{color:k},align:"center"},"Valid?"))),l.a.createElement($.a,null,t.map((function(e,t){return l.a.createElement(Z.a,{key:t+e.timestamp,style:t%2===0?{background:C}:{background:v}},l.a.createElement(q.a,null,t),l.a.createElement(q.a,{onClick:a?y:null,style:a?le.addressCell:le.plainCell,align:"center"},l.a.createElement("div",{style:le.addressBody},null===e.fromAddress?"System":e.fromAddress)),l.a.createElement(q.a,{onClick:a?y:null,style:a?le.addressCell:le.plainCell,align:"center"},l.a.createElement("div",{style:le.addressBody},e.toAddress)),l.a.createElement(q.a,{align:"center"},e.amount),l.a.createElement(q.a,{align:"center"},e.timestamp),l.a.createElement(q.a,{align:"center"},"Yes"))}))))),g&&l.a.createElement(ne,{open:d,handleClose:function(){u(!1)},walletInfo:g}))},oe=a(312),ie=a(313),se=a(314),ce={paperStyle:{height:375,width:275,backgroundColor:C,cursor:"pointer"},selectedpaperStyle:{height:375,width:275,backgroundColor:C,cursor:"pointer",border:"2px solid",borderColor:E},textBlock:{padding:"7px 10px"},mainBlockHeader:{fontWeight:400,padding:"5px 10px"},subBlockHeader:{fontWeight:400,padding:"5px 10px"},blockBody:{fontSize:12,color:"red",paddingLeft:10,marginTop:0,textOverflow:"ellipsis",width:"90%",whiteSpace:"nowrap",overflow:"hidden"},tableContainer:{marginBottom:40},tableHead:{backgroundColor:p}},de=function(){var e=Object(n.useContext)(L).blocks;console.log("Obtaing blocks from provider",e);var t=Object(n.useState)(0),a=Object(c.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)([]),d=Object(c.a)(i,2),u=d[0],m=d[1];return l.a.createElement(n.Fragment,null,l.a.createElement(M,null),l.a.createElement(oe.a,null,l.a.createElement("h1",{style:{fontWeight:400}},"Blocks on Chain"),l.a.createElement("p",null,"Each card represents a block on a chain. Click on a block to see the transaction.")),l.a.createElement(oe.a,{style:{overflowX:"auto",height:400,marginTop:20}},l.a.createElement(ie.a,{container:!0,spacing:2,style:{flexWrap:"nowrap"}},e.map((function(e,t){return l.a.createElement(ie.a,{item:!0,xs:3,key:t+e.timestamp},l.a.createElement(J.a,{onClick:function(){return function(e,t){console.log("Show Transactions",t.transactions),o(e),m(t.transactions)}(t,e)},style:t===r?ce.selectedpaperStyle:ce.paperStyle},l.a.createElement("div",{style:ce.textBlock},l.a.createElement(g.a,{variant:"h5",component:"h2",style:ce.mainBlockHeader},"Block","0"===e.previousHash?l.a.createElement("span",{style:{color:w,fontSize:18,paddingLeft:2}},"(Genesis block)"):t)),l.a.createElement(se.a,null),l.a.createElement("div",{style:ce.textBlock},l.a.createElement(g.a,{variant:"subtitle1",style:ce.subBlockHeader},"Hash"),l.a.createElement("p",{style:Object(s.a)(Object(s.a)({},ce.blockBody),{},{color:"#"+e.hash.substring(0,6)})},e.hash),l.a.createElement(g.a,{variant:"subtitle1",style:ce.subBlockHeader},"Hash of previous block"),l.a.createElement("p",{style:Object(s.a)(Object(s.a)({},ce.blockBody),{},{color:"#"+e.previousHash.substring(0,6)})},e.previousHash)),l.a.createElement(se.a,null),l.a.createElement("div",{style:ce.textBlock},l.a.createElement(g.a,{variant:"subtitle1",style:ce.subBlockHeader},"Nonce"),l.a.createElement("p",{style:Object(s.a)(Object(s.a)({},ce.blockBody),{},{color:w})},e.nonce)),l.a.createElement(se.a,null),l.a.createElement("div",{style:ce.textBlock},l.a.createElement(g.a,{variant:"subtitle1",style:ce.subBlockHeader},"Timestamp"),l.a.createElement("p",{style:Object(s.a)(Object(s.a)({},ce.blockBody),{},{color:w})},e.timestamp))))})))),l.a.createElement(oe.a,null,l.a.createElement("h1",{style:{fontWeight:400}},"Transactions inside blocks"),0===r?l.a.createElement("p",{style:{color:O}},"This block has no transactions"):l.a.createElement(re,{txndata:u,linked:!0})))},ue=a(316),me=function(){var e=(new D).blockchainInstance;return l.a.createElement(n.Fragment,null,l.a.createElement(M,null),l.a.createElement(oe.a,null,l.a.createElement("h1",{style:{fontWeight:400}},"Settings"),l.a.createElement("p",null,"Control how the blockchain behaves when new transactions or blocks are created. Changes are saved."),l.a.createElement("div",{style:{marginTop:40}},l.a.createElement(ue.a,{id:"outlined-full-width",label:"Difficulty",value:e.difficulty,style:{margin:8,width:"50%"},placeholder:"Placeholder",helperText:"Controls how long the mining process takes. Higher number will make mining slower. Default: 2",size:"small",type:"number",margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined"})),l.a.createElement("div",{style:{marginTop:40}},l.a.createElement(ue.a,{id:"outlined-full-width",label:"Mining Reward",style:{margin:8,width:"50%"},value:e.miningReward,placeholder:"Placeholder",helperText:"How much 'coins' a miner receives for successfully creating a new block for the chain. Default: 100",size:"small",type:"number",margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined"})),l.a.createElement("div",{style:{marginTop:20,marginBottom:20}},l.a.createElement(f.a,{variant:"contained",style:{backgroundColor:T,color:k},onClick:function(){console.log("Saving settings value")}},"Save"))))},he=a(69),ge=a(319),fe=a(317),ye=new D,be=ye.walletKeys[0],pe=function(){var e=Object(n.useContext)(L),t=e.getNewBlocks,a=e.pendingTxns,r=e.getPendingTxns,o=Object(n.useState)({fromAddress:be.publicKey,toAddress:"",amount:""}),i=Object(c.a)(o,2),u=i[0],m=i[1],h=Object(n.useState)(!1),g=Object(c.a)(h,2),y=g[0],b=g[1],p=function(e){m(Object(s.a)(Object(s.a)({},u),{},Object(he.a)({},e.target.name,e.target.value)))},v=function(e,t){"clickaway"!==t&&b(!1)};return l.a.createElement(n.Fragment,null,l.a.createElement(M,null),l.a.createElement(oe.a,null,l.a.createElement("h1",{style:{fontWeight:400}},"Transactions"),l.a.createElement("p",null,"Transfer some money, but could be any data"),l.a.createElement("div",{style:{marginTop:20}},l.a.createElement(ue.a,{id:"fromAddredd",label:"From Address",name:"fromAddress",style:{margin:8,width:"50%"},helperText:"This is your wallet address. You cannot change it because you can only spend your own coins.",size:"small",value:be.publicKey,margin:"normal",disabled:!0,InputLabelProps:{shrink:!0},variant:"outlined"})),l.a.createElement("div",{style:{marginTop:20}},l.a.createElement(ue.a,{id:"toAddress",label:"To Address",name:"toAddress",style:{margin:8,width:"50%"},helperText:"The address of the wallet where you want to send the money.",size:"small",margin:"normal",InputLabelProps:{shrink:!0},value:u.toAddress,onChange:p,variant:"outlined"})),l.a.createElement("div",{style:{marginTop:20}},l.a.createElement(ue.a,{id:"amount",label:"Amount",name:"amount",style:{margin:8,width:"50%"},helperText:"Amount to be transferred",size:"small",value:u.amount,margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:p})),l.a.createElement("div",{style:{marginTop:20,marginBottom:20}},l.a.createElement(f.a,{variant:"contained",style:{backgroundColor:T,color:k},onClick:function(){console.log("Creating Transaction",u);var e=new F(u.fromAddress,u.toAddress,u.amount);e.signTransaction(be.keyObj);try{ye.addTransaction(e),m(Object(s.a)(Object(s.a)({},u),{},{toAddress:"",amount:""}));var t=ye.getPendingTransactions();console.log("Pending transactions",t),t&&(b(!0),r(t))}catch(a){return void alert(a)}}},"Sign & Create Transaction"),l.a.createElement(ge.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:y,autoHideDuration:6e3,onClose:v},l.a.createElement(fe.a,{onClose:v,elevation:6,variant:"filled",color:"info",severity:"success"},"Transaction successfully signed, created, and added in pending transactions list."))),l.a.createElement("h1",{style:{fontWeight:400}},"Pending Transactions"),a.length>0?l.a.createElement("div",null,l.a.createElement("p",null,"Following are your pending transactions"),l.a.createElement(re,{txndata:a}),l.a.createElement(d.b,{to:"/",style:{textDecoration:"none"}},l.a.createElement(f.a,{variant:"contained",style:{backgroundColor:T,color:k,marginBottom:20},onClick:function(){ye.minePendingTransactions(),console.log(ye.getBlocks());var e=ye.getBlocks();t(e),r(ye.getPendingTransactions())}},"Start Mining"))):l.a.createElement("p",{style:{color:O}},"You don't have any pending transactions")))},ve=function(){return l.a.createElement(R,null,l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:de}),l.a.createElement(i.a,{path:"/settings",component:me}),l.a.createElement(i.a,{path:"/createtxns",component:pe})))},Ee=function(){return l.a.createElement(d.a,{basename:"/visualize-blockchain"},l.a.createElement(ve,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[152,1,2]]]);
//# sourceMappingURL=main.a9e9ee6c.chunk.js.map