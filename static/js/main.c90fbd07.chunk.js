(this["webpackJsonpvisualize-blockchain"]=this["webpackJsonpvisualize-blockchain"]||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t),function(e){var t=a(29),n=a(48),l=a(49),r=a(160),o=new(0,a(56).ec)("secp256k1"),i=function(){function e(t,a,l){Object(n.a)(this,e),this.fromAddress=t,this.toAddress=a,this.amount=l,this.timestamp=Date.now()}return Object(l.a)(e,[{key:"calculateHash",value:function(){return r(this.fromAddress+this.toAddress+this.amount).toString()}},{key:"signTransaction",value:function(e){if(e.getPublic("hex")!==this.fromAddress)throw new Error("You cannot sign transactions for other wallets");var t=this.calculateHash(),a=e.sign(t,"base64");this.signature=a.toDER("hex")}},{key:"isValid",value:function(){if(null===this.fromAddress)return!0;if(!this.signature||0===this.signature.length)throw new Error("No signature in this transaction");return o.keyFromPublic(this.fromAddress,"hex").verify(this.calculateHash(),this.signature)}}]),e}(),s=function(){function e(t,a){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(n.a)(this,e),console.log("Inside the constructor of Block"),this.timestamp=t,this.transactions=a,this.previousHash=l,this.hash=this.calculateHash(),this.nonce=0}return Object(l.a)(e,[{key:"calculateHash",value:function(){return r(this.nonce+this.timestamp+this.previousHash+JSON.stringify(this.transactions)).toString()}},{key:"mineBlock",value:function(e){for(;this.hash.substring(0,e)!==Array(e+1).join("0");)this.nonce++,this.hash=this.calculateHash();console.log("Block mined:"+this.hash)}},{key:"hasValidTransactions",value:function(){var e,a=Object(t.a)(this.transactions);try{for(a.s();!(e=a.n()).done;){if(!e.value.isValid())return!1}}catch(n){a.e(n)}finally{a.f()}return!0}}]),e}(),c=function(){function e(){Object(n.a)(this,e),this.chain=[this.createGenesisBlock()],this.difficulty=2,this.pendingTransactions=[],this.miningReward=100}return Object(l.a)(e,[{key:"createGenesisBlock",value:function(){return new s(Date.now(),"Genesis Block","0")}},{key:"getLatestBlock",value:function(){return this.chain[this.chain.length-1]}},{key:"minePendingTransactions",value:function(e){console.log("Mining pending transaction",e);var t=new i(null,e,this.miningReward);this.pendingTransactions.push(t);var a=new s(Date.now(),this.pendingTransactions,this.getLatestBlock().hash);a.mineBlock(this.difficulty),console.log("Block successfully mined!"),this.chain.push(a),this.pendingTransactions=[]}},{key:"addTransaction",value:function(e){if(console.log("Adding new transaction"),!e.fromAddress||!e.toAddress)throw new Error("Transaction must include from and to address");if(!e.isValid())throw new Error("Cannot add invalid transaction to chain");this.pendingTransactions.push(e)}},{key:"getBalanceOfAddress",value:function(e){var a=0;console.log("Chain",this.chain);var n,l=Object(t.a)(this.chain);try{for(l.s();!(n=l.n()).done;){var r,o=n.value,i=Object(t.a)(o.transactions);try{for(i.s();!(r=i.n()).done;){var s=r.value;s.fromAddress===e&&(a-=s.amount),s.toAddress===e&&(a+=s.amount)}}catch(c){i.e(c)}finally{i.f()}}}catch(c){l.e(c)}finally{l.f()}return a}},{key:"getAllTransactionsForWallet",value:function(e){var a,n=[],l=Object(t.a)(this.chain);try{for(l.s();!(a=l.n()).done;){var r,o=a.value,i=Object(t.a)(o.transactions);try{for(i.s();!(r=i.n()).done;){var s=r.value;s.fromAddress!==e&&s.toAddress!==e||n.push(s)}}catch(c){i.e(c)}finally{i.f()}}}catch(c){l.e(c)}finally{l.f()}return n}},{key:"isChainValid",value:function(){for(var e=1;e<this.chain.length;e++){var t=this.chain[e],a=this.chain[e-1];if(!t.hasValidTransactions())return!1;if(t.hash!==t.calculateHash())return!1;if(t.previousHash!==a.hash)return!1}return!0}}]),e}();e.exports.Blockchain=c,e.exports.Transaction=i}.call(this,a(159)(e))},140:function(e,t,a){e.exports=a.p+"static/media/logoXL.5ebf598e.png"},153:function(e,t,a){e.exports=a(247)},158:function(e,t,a){},165:function(e,t){},167:function(e,t){},200:function(e,t){},201:function(e,t){},247:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(12),o=a.n(r),i=(a(158),a(14)),s=a(19),c=a(25),d=a(32),u=a(296),m=a(299),h=a(301),g=a(249),f=a(303),y=a(302),b=a(304),p=" #336699",v="#CADCED",k=" #009999",E="#FFFFF0",w="#808080",O="#CC3333",T="#62b362",x="#FE8402",C="#F6FAF9",j=a(140),B=a.n(j),A=a(48),S=a(49),H=a(102).Blockchain,P=a(56).ec,I=function(){function e(){Object(A.a)(this,e),this.blockchainInstance=new H,this.walletKeys=[],console.log("Inside constructor of blockchainService"),this.blockchainInstance.difficulty=1,this.blockchainInstance.minePendingTransactions("my-wallet-address"),this.generateWalletKeys()}return Object(S.a)(e,[{key:"generateWalletKeys",value:function(){console.log("Generating wallet keys");var e=new P("secp256k1").genKeyPair();this.walletKeys.push({keyObj:e,publicKey:e.getPublic("hex"),privateKey:e.getPrivate("hex")})}},{key:"getBlocks",value:function(){return this.blockchainInstance.chain}},{key:"addTransaction",value:function(e){console.log("Adding Transaction",e),this.blockchainInstance.addTransaction(e)}},{key:"getPendingTransactions",value:function(){return console.log("Getting Pending Transaction"),this.blockchainInstance.pendingTransactions}},{key:"minePendingTransactions",value:function(){this.blockchainInstance.minePendingTransactions(this.walletKeys[0].publicKey)}},{key:"getBalanceOfAddress",value:function(e){return this.blockchainInstance.getBalanceOfAddress(e)}}]),e}(),F=l.a.createContext("No blocks"),W=new I,z=W.getBlocks(),N=W.getPendingTransactions(),D=function(e){var t=e.children,a=Object(n.useState)(z),r=Object(c.a)(a,2),o=r[0],i=r[1],s=Object(n.useState)(N),d=Object(c.a)(s,2),u=d[0],m=d[1];return l.a.createElement(F.Provider,{value:{blocks:o,getNewBlocks:function(e){i(e)},pendingTxns:u,getPendingTxns:function(e){m(e)}}},t)},L=Object(u.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2),color:p},title:{flexGrow:1},header:{backgroundColor:C},link:{textDecoration:"none",color:p}}})),K=function(){var e=L(),t=Object(n.useContext)(F).pendingTxns.length;return l.a.createElement("div",{className:e.root},l.a.createElement(m.a,{position:"static",className:e.header},l.a.createElement(h.a,null,l.a.createElement(y.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},l.a.createElement("img",{src:B.a,alt:"logo",style:{height:50,width:50}})),l.a.createElement(g.a,{variant:"h6",className:e.title},l.a.createElement(d.c,{exact:!0,to:"/",className:e.link,activeStyle:{color:k}},"Blockchain-Visualization")),l.a.createElement(d.c,{to:"/settings",className:e.link,activeStyle:{color:k}},l.a.createElement(f.a,{size:"small",variant:"outlined",color:"inherit"},"Settings")),l.a.createElement(d.c,{to:"/createtxns",className:e.link,activeStyle:{color:k}},l.a.createElement(b.a,{anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:t,color:"secondary"},l.a.createElement(f.a,{size:"small",variant:"outlined",color:"inherit",style:{marginLeft:5}},"Create Transactions"))))))},G=a(29),V=a(248),R=a(309),Y=a(313),M=a(312),J=a(308),X=a(310),$=a(311),q=a(322),Q=a(307),U=a(306),Z=a(305),_=function(e){var t=e.open,a=e.handleClose,n=e.walletInfo;return console.log("Wallet Info",n),l.a.createElement(q.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(Z.a,{id:"alert-dialog-title",style:{color:k}},"Your Wallet Details"),l.a.createElement(U.a,null,l.a.createElement("div",null,l.a.createElement("p",{style:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},"Your Wallet Address:",l.a.createElement("span",{style:{color:x,marginLeft:5}},n.address)),l.a.createElement("p",null,"Balance: ",l.a.createElement("span",{style:{color:x,marginLeft:5}},n.balance))),n.transactions.length>0?l.a.createElement(te,{txndata:n.transactions}):l.a.createElement("p",{style:{color:O}},"No transaction details")),l.a.createElement(Q.a,null,l.a.createElement(f.a,{onClick:a,style:{color:O,fontSize:18,fontWeight:"bold"},autoFocus:!0},"Close")))},ee={tableContainer:{marginBottom:40},tableHead:{backgroundColor:p},addressBody:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},addressCell:{maxWidth:"100px",cursor:"pointer",color:x},plainCell:{maxWidth:"100px"}},te=function(e){var t=e.txndata,a=e.linked,r=Object(n.useContext)(F).blocks,o=Object(n.useState)(!1),i=Object(c.a)(o,2),d=i[0],u=i[1],m=Object(n.useState)({address:"",balance:"",transactions:[]}),h=Object(c.a)(m,2),g=h[0],f=h[1],y=function(e){console.log(e.target.textContent);var t=b(e.target.textContent),a=p(e.target.textContent);console.log("My balance is",a),f(Object(s.a)(Object(s.a)({},g),{},{address:e.target.textContent,balance:t,transactions:a})),u(!0)},b=function(e){var t,a=0,n=Object(G.a)(r);try{for(n.s();!(t=n.n()).done;){var l,o=t.value,i=Object(G.a)(o.transactions);try{for(i.s();!(l=i.n()).done;){var s=l.value;s.fromAddress===e&&(a-=s.amount),s.toAddress===e&&(a+=s.amount)}}catch(c){i.e(c)}finally{i.f()}}}catch(c){n.e(c)}finally{n.f()}return a},p=function(e){var t,a=[],n=Object(G.a)(r);try{for(n.s();!(t=n.n()).done;){var l,o=t.value,i=Object(G.a)(o.transactions);try{for(i.s();!(l=i.n()).done;){var s=l.value;s.fromAddress!==e&&s.toAddress!==e||a.push(s)}}catch(c){i.e(c)}finally{i.f()}}}catch(c){n.e(c)}finally{n.f()}return a};return l.a.createElement(n.Fragment,null,l.a.createElement(J.a,{component:V.a,style:ee.tableContainer},l.a.createElement(R.a,{"aria-label":"customized table"},l.a.createElement(X.a,{style:ee.tableHead},l.a.createElement($.a,{style:{color:"white"}},l.a.createElement(M.a,{style:{color:E}},"#"),l.a.createElement(M.a,{style:{color:E},align:"center"},"From"),l.a.createElement(M.a,{style:{color:E},align:"center"},"To"),l.a.createElement(M.a,{style:{color:E},align:"center"},"Amount"),l.a.createElement(M.a,{style:{color:E},align:"center"},"Timestamp"),l.a.createElement(M.a,{style:{color:E},align:"center"},"Valid?"))),l.a.createElement(Y.a,null,t.map((function(e,t){return l.a.createElement($.a,{key:t+e.timestamp,style:t%2===0?{background:C}:{background:v}},l.a.createElement(M.a,null,t),l.a.createElement(M.a,{onClick:a?y:null,style:a?ee.addressCell:ee.plainCell,align:"center"},l.a.createElement("div",{style:ee.addressBody},null===e.fromAddress?"System":e.fromAddress)),l.a.createElement(M.a,{onClick:a?y:null,style:a?ee.addressCell:ee.plainCell,align:"center"},l.a.createElement("div",{style:ee.addressBody},e.toAddress)),l.a.createElement(M.a,{align:"center"},e.amount),l.a.createElement(M.a,{align:"center"},e.timestamp),l.a.createElement(M.a,{align:"center"},"Yes"))}))))),g&&l.a.createElement(_,{open:d,handleClose:function(){u(!1)},walletInfo:g}))},ae=a(314),ne=a(315),le=a(316),re={paperStyle:{height:375,width:275,backgroundColor:C,cursor:"pointer"},selectedpaperStyle:{height:375,width:275,backgroundColor:C,cursor:"pointer",border:"2px solid",borderColor:k},textBlock:{padding:"7px 10px"},mainBlockHeader:{fontWeight:400,padding:"5px 10px"},subBlockHeader:{fontWeight:400,padding:"5px 10px"},blockBody:{fontSize:12,color:"red",paddingLeft:10,marginTop:0,textOverflow:"ellipsis",width:"90%",whiteSpace:"nowrap",overflow:"hidden"},tableContainer:{marginBottom:40},tableHead:{backgroundColor:p}},oe=function(){var e=Object(n.useContext)(F).blocks;console.log("Obtaing blocks from provider",e);var t=Object(n.useState)(0),a=Object(c.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)([]),d=Object(c.a)(i,2),u=d[0],m=d[1];return l.a.createElement(n.Fragment,null,l.a.createElement(K,null),l.a.createElement(ae.a,null,l.a.createElement("h1",{style:{fontWeight:400}},"Blocks on Chain"),l.a.createElement("p",null,"Each card represents a block on a chain. Click on a block to see the transaction.")),l.a.createElement(ae.a,{style:{overflowX:"auto",height:400,marginTop:20}},l.a.createElement(ne.a,{container:!0,spacing:2,style:{flexWrap:"nowrap"}},e.map((function(e,t){return l.a.createElement(ne.a,{item:!0,xs:3,key:t+e.timestamp},l.a.createElement(V.a,{onClick:function(){return function(e,t){console.log("Show Transactions",t.transactions),o(e),m(t.transactions)}(t,e)},style:t===r?re.selectedpaperStyle:re.paperStyle},l.a.createElement("div",{style:re.textBlock},l.a.createElement(g.a,{variant:"h5",component:"h2",style:re.mainBlockHeader},"Block","0"===e.previousHash?l.a.createElement("span",{style:{color:w,fontSize:18,paddingLeft:2}},"(Genesis block)"):t)),l.a.createElement(le.a,null),l.a.createElement("div",{style:re.textBlock},l.a.createElement(g.a,{variant:"subtitle1",style:re.subBlockHeader},"Hash"),l.a.createElement("p",{style:Object(s.a)(Object(s.a)({},re.blockBody),{},{color:"#"+e.hash.substring(0,6)})},e.hash),l.a.createElement(g.a,{variant:"subtitle1",style:re.subBlockHeader},"Hash of previous block"),l.a.createElement("p",{style:Object(s.a)(Object(s.a)({},re.blockBody),{},{color:"#"+e.previousHash.substring(0,6)})},e.previousHash)),l.a.createElement(le.a,null),l.a.createElement("div",{style:re.textBlock},l.a.createElement(g.a,{variant:"subtitle1",style:re.subBlockHeader},"Nonce"),l.a.createElement("p",{style:Object(s.a)(Object(s.a)({},re.blockBody),{},{color:w})},e.nonce)),l.a.createElement(le.a,null),l.a.createElement("div",{style:re.textBlock},l.a.createElement(g.a,{variant:"subtitle1",style:re.subBlockHeader},"Timestamp"),l.a.createElement("p",{style:Object(s.a)(Object(s.a)({},re.blockBody),{},{color:w})},e.timestamp))))})))),l.a.createElement(ae.a,null,l.a.createElement("h1",{style:{fontWeight:400}},"Transactions inside blocks"),0===r?l.a.createElement("p",{style:{color:O}},"This block has no transactions"):l.a.createElement(te,{txndata:u,linked:!0})))},ie=a(318),se=function(){var e=(new I).blockchainInstance;return l.a.createElement(n.Fragment,null,l.a.createElement(K,null),l.a.createElement(ae.a,null,l.a.createElement("h1",{style:{fontWeight:400}},"Settings"),l.a.createElement("p",null,"Control how the blockchain behaves when new transactions or blocks are created. Changes are saved."),l.a.createElement("div",{style:{marginTop:40}},l.a.createElement(ie.a,{id:"outlined-full-width",label:"Difficulty",value:e.difficulty,style:{margin:8,width:"50%"},placeholder:"Placeholder",helperText:"Controls how long the mining process takes. Higher number will make mining slower. Default: 2",size:"small",type:"number",margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined"})),l.a.createElement("div",{style:{marginTop:40}},l.a.createElement(ie.a,{id:"outlined-full-width",label:"Mining Reward",style:{margin:8,width:"50%"},value:e.miningReward,placeholder:"Placeholder",helperText:"How much 'coins' a miner receives for successfully creating a new block for the chain. Default: 100",size:"small",type:"number",margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined"})),l.a.createElement("div",{style:{marginTop:20,marginBottom:20}},l.a.createElement(f.a,{variant:"contained",style:{backgroundColor:T,color:E},onClick:function(){console.log("Saving settings value")}},"Save"))))},ce=a(69),de=a(321),ue=a(319),me=a(102).Transaction,he=new I,ge=he.walletKeys[0],fe=function(){var e=Object(n.useContext)(F),t=e.getNewBlocks,a=e.pendingTxns,r=e.getPendingTxns,o=Object(n.useState)({fromAddress:ge.publicKey,toAddress:"",amount:""}),i=Object(c.a)(o,2),u=i[0],m=i[1],h=Object(n.useState)(!1),g=Object(c.a)(h,2),y=g[0],b=g[1],p=function(e){m(Object(s.a)(Object(s.a)({},u),{},Object(ce.a)({},e.target.name,e.target.value)))},v=function(e,t){"clickaway"!==t&&b(!1)};return l.a.createElement(n.Fragment,null,l.a.createElement(K,null),l.a.createElement(ae.a,null,l.a.createElement("h1",{style:{fontWeight:400}},"Transactions"),l.a.createElement("p",null,"Transfer some money, but could be any data"),l.a.createElement("div",{style:{marginTop:20}},l.a.createElement(ie.a,{id:"fromAddredd",label:"From Address",name:"fromAddress",style:{margin:8,width:"50%"},helperText:"This is your wallet address. You cannot change it because you can only spend your own coins.",size:"small",value:ge.publicKey,margin:"normal",disabled:!0,InputLabelProps:{shrink:!0},variant:"outlined"})),l.a.createElement("div",{style:{marginTop:20}},l.a.createElement(ie.a,{id:"toAddress",label:"To Address",name:"toAddress",style:{margin:8,width:"50%"},helperText:"The address of the wallet where you want to send the money.",size:"small",margin:"normal",InputLabelProps:{shrink:!0},value:u.toAddress,onChange:p,variant:"outlined"})),l.a.createElement("div",{style:{marginTop:20}},l.a.createElement(ie.a,{id:"amount",label:"Amount",name:"amount",style:{margin:8,width:"50%"},helperText:"Amount to be transferred",size:"small",value:u.amount,margin:"normal",InputLabelProps:{shrink:!0},variant:"outlined",onChange:p})),l.a.createElement("div",{style:{marginTop:20,marginBottom:20}},l.a.createElement(f.a,{variant:"contained",style:{backgroundColor:T,color:E},onClick:function(){console.log("Creating Transaction",u);var e=new me(u.fromAddress,u.toAddress,u.amount);e.signTransaction(ge.keyObj);try{he.addTransaction(e),m(Object(s.a)(Object(s.a)({},u),{},{toAddress:"",amount:""}));var t=he.getPendingTransactions();console.log("Pending transactions",t),t&&(b(!0),r(t))}catch(a){return void alert(a)}}},"Sign & Create Transaction"),l.a.createElement(de.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:y,autoHideDuration:6e3,onClose:v},l.a.createElement(ue.a,{onClose:v,elevation:6,variant:"filled",color:"info",severity:"success"},"Transaction successfully signed, created, and added in pending transactions list."))),l.a.createElement("h1",{style:{fontWeight:400}},"Pending Transactions"),a.length>0?l.a.createElement("div",null,l.a.createElement("p",null,"Following are your pending transactions"),l.a.createElement(te,{txndata:a}),l.a.createElement(d.b,{to:"/",style:{textDecoration:"none"}},l.a.createElement(f.a,{variant:"contained",style:{backgroundColor:T,color:E,marginBottom:20},onClick:function(){he.minePendingTransactions(),console.log(he.getBlocks());var e=he.getBlocks();t(e),r(he.getPendingTransactions())}},"Start Mining"))):l.a.createElement("p",{style:{color:O}},"You don't have any pending transactions")))},ye=function(){return l.a.createElement(D,null,l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:oe}),l.a.createElement(i.a,{path:"/settings",component:se}),l.a.createElement(i.a,{path:"/createtxns",component:fe})))},be=function(){return l.a.createElement(d.a,{basename:"/visualize-blockchain"},l.a.createElement(ye,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[153,1,2]]]);
//# sourceMappingURL=main.c90fbd07.chunk.js.map